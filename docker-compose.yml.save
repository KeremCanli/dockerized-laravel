networks:
    sfmdev:
        driver: bridge
services:
    adminer:
        image: adminer
        networks:
            - sfmdev
        ports:
            - 8080:8080
    memcached:
        container_name: memcached
        image: memcached:latest
        ports:
            - 11211:11211
    mysql:
        command: --default-authentication-plugin=mysql_native_password
        environment:
            MYSQL_ROOT_PASSWORD: "sefaMerve2019!"
            MYSQL_DATABASE: "db_test_env"
        image: mysql:8.0
        networks:
            - sfmdev
        ports:
            - 3306:3306
        volumes:
            - ./mysql-dump:/docker-entrypoint-initdb.d
    nginx:
        image: nginx:latest
        networks:
            - sfmdev
        ports:
            - 8181:8181
        volumes:
            - ./code:/code
            - ./site.conf:/etc/nginx/conf.d/site.conf
            - ./default.conf:/etc/nginx/conf.d/default.conf
            - ./default.conf:/etc/nginx/conf.d/mysite.conf
    nodejs:
        build: ./nodejs
        command: node nodeJSCode/app.js
        networks:
            - sfmdev
        ports:
            - 4200:4200
        volumes:
            - ./nodeJSCode:/nodeJSCode
    php:
        build: ./php-fpm
        expose:
            - 9000
        networks:
            - sfmdev
        volumes:
            - ./code:/code
    redis:
        container_name: redis
        environment:
            - REDIS_REPLICATION_MODE=master
            - REDIS_PASSWORD="sefaMerve2019!"
        image: 'bitnami/redis:latest'
        networks:
            - sfmdev
        ports:
            - 6379
version: "3"